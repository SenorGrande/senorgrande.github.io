<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.9f068d288fefd079fab7.css">.header-module--header--3A712{padding:1rem 0 3rem}.header-module--title--33kOg{color:#000;font-size:3rem;text-decoration:none}.header-module--nav-list--87D9u{display:flex;list-style-type:none;margin:0}.header-module--nav-item--1ixk0{color:#999;font-size:.9rem;margin-right:1.3rem;text-decoration:none}.header-module--nav-item--1ixk0:hover{color:#666}.header-module--active-nav-item--26N0B{color:#333}.footer-module--footer--R2bpz{margin-top:3rem}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{color:orange;background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:sans-serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}.layout-module--container--2TGku{margin:0 auto;max-width:750px;padding:1rem;display:flex;flex-direction:column;min-height:100vh}.layout-module--content--3nIku{flex-grow:1}.blog-module--posts--a25pe{list-style-type:none;margin:0}.blog-module--post--1jMia{margin:1rem 0}.blog-module--post--1jMia a{background:#f4f4f4;color:#000;display:block;padding:1rem;text-decoration:none}.blog-module--post--1jMia a:hover{background:#e4e4e4}.blog-module--post--1jMia h2{margin-bottom:0}.blog-module--post--1jMia p{color:#777;font-size:.8rem;font-style:italic}</style><meta name="generator" content="Gatsby 2.18.12"/><title data-react-helmet="true">Arduino CO2 sensor with Johnny Five | Senor Grande&#x27;s Blog...</title><link as="script" rel="preload" href="/webpack-runtime-93800de5fbb5b85039e8.js"/><link as="script" rel="preload" href="/app-c593fadebb2cdbf03700.js"/><link as="script" rel="preload" href="/styles-7b77c40001eb780bb93d.js"/><link as="script" rel="preload" href="/commons-e2ecdd7eec8533740b60.js"/><link as="script" rel="preload" href="/component---src-templates-blog-js-905806397317b137f1de.js"/><link as="fetch" rel="preload" href="/page-data/blog/arduino-co2/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="layout-module--container--2TGku"><div class="layout-module--content--3nIku"><header class="header-module--header--3A712"><h1><a class="header-module--title--33kOg" href="/">Senor Grande&#x27;s Blog...</a></h1><nav><ul class="header-module--nav-list--87D9u"><li><a class="header-module--nav-item--1ixk0" href="/">Home</a></li><li><a class="header-module--nav-item--1ixk0" href="/blog">Blog</a></li><li><a class="header-module--nav-item--1ixk0" href="/about">About</a></li><li><a class="header-module--nav-item--1ixk0" href="/contact">Contact</a></li></ul></nav></header><h1>Arduino CO2 sensor with Johnny Five</h1><p>2020-09-27</p><div><p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 37.23404255319149%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABYklEQVQY0z1QzUsCQRT3T+lUJ6+aJenMzox0rQ4RgUrdOnSILtEf0KFDpyAoOoRESVERFWtmmWluCmauiqsp5K7h+rEXzWNvdy0YHo/35vf1LK0yMx6F15fpQCGDBvtR6KBBtCpVJQLzbpVB0yyRToW1JKJK1PjPLCasXWGwuwy4Avvc8QF3ckiP9jgxzmk1CvP7i3EA9GQP9Al+Qs4bLCYYFp1PpohodWXa6/MtLy36ffMzs3M3p6hXB1IaOrcLYefDlaOQdCf4SU03QsGCoWx4U0vk/RmnH7EQRq+8Kx1B3wXSksAUlVJu/szuXRhJhpzZ2FRXjwMo+g/WI3286OBM1C3GsZIn7TLEY2DqK4fvgraNtdGdLauYcBnKut4ws2k+F8epCMrGUFHARYHLRDHQ1UWi1VjpDe1uWzfXx0yYUYcHY394AuZBTdXt6HQQGHqofdnzdO24Ddp6dU9zeG36C3IZCkO6ILG9AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Johnny Five"
        title="Johnny Five"
        src="/static/9bbafa3b112cc845f1c8f7f5f9b9695f/8c557/johnny-five.png"
        srcset="/static/9bbafa3b112cc845f1c8f7f5f9b9695f/4dcb9/johnny-five.png 188w,
/static/9bbafa3b112cc845f1c8f7f5f9b9695f/5ff7e/johnny-five.png 375w,
/static/9bbafa3b112cc845f1c8f7f5f9b9695f/8c557/johnny-five.png 700w"
        sizes="(max-width: 700px) 100vw, 700px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span></p>
<p>Here's a quikc post on how to read from a CO2 sensor with Johnny-Five using an Arduino. You can get an MQ-135 sensor off Ebay for a couple dollarydoos.
<a href="https://github.com/SenorGrande/co2-sensor">Source code for this can be found here</a></p>
<h2>Circuit Setup</h2>
<p>Wire ground on the sensor to ground on the Arduino and same with VCC on the sensor to 5V. Connect AD on the sensor to any of the analog ports on the Arduino, I chose A0. If you use a different port, make sure this is reflected in the code!</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 707px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 70.74468085106383%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAACnElEQVQoz2P4////v3///gLB//8/njx5N3kykPEHCP7+haD/uAEDUOd/sAFA4venTx9OnIBzCQKGX//+X7v74OjZi6vPXpu7ceu0TVvmbtw+a/OuWRt3zF6/de7W3R++fYe4DqLh3/9/z95+fPDyw9cfvxg+ff/ZtWSdT8NkvbRS7fAkkawm4eRqnuRakfR6kZQasYyGWy/eAPX8/fcPov/9l+8+JfMs02f0rL/AsHv37s0bN2TPXiGY0y5f2GnSszR68c7YJTtdpqx1nrJGqXn+8QcvIJr/gjW/ePvRLrlXP7Jz2vpTDJcuXVq0flPIhIW86U2q8QUGbfOMWufpt8yVKJskVz1NprBz7j5QKABDDmLzu8/fgzJqFcJbZ556zgDku0xexZDVI1w2WbBkEm/JFI6SqZwlU3lKp3LXzBOLK56ydAUoLP/8gWj+8PVnZFa1e3HPhnufGYACobPWKySVcRdNZMyfIJRUpRCVIxudB0SKsfm8wRnNmw+CNSPi7M79BztWLP/x4QPDz1+//araVQPj9Oune/cvtsmuUPYOVw+IVfeP0Q6MFfWJbtlyGE3zl58/lxSV/n70mOH1q1dSCoqsipoO1T0JTT0WZZ1CxRNVaqcLlE6WKJsoXjJhxelrED/DNX/4+m1Jafmvx49BiWTS9kPVK7dP2HcmY8We6qUbpjW2FyRn9G/d279gacPcpY/evAeF9l9IZAGj+d/H79+Xlpb/BmpGTjH/wMa/PXFyx7QZv4Gp9ft3rAnr65/fyyuqfkE0A530G5SM//36DdTy/+XeA4tq6249fHjm1KnLly5duXzl6hUwugxGly5fuHJlTkbWn0fYbP555+6O7Px1RaVrcwvW5CChXDDKK1yVnX+iofn/ly8AJEZuHW6zUD8AAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Arduino Circuit Diagram"
        title="Arduino Circuit Diagram"
        src="/static/210fab771a858a8676fa182ca0dbc75a/394f7/arduino-co2.png"
        srcset="/static/210fab771a858a8676fa182ca0dbc75a/4dcb9/arduino-co2.png 188w,
/static/210fab771a858a8676fa182ca0dbc75a/5ff7e/arduino-co2.png 375w,
/static/210fab771a858a8676fa182ca0dbc75a/394f7/arduino-co2.png 707w"
        sizes="(max-width: 707px) 100vw, 707px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span></p>
<h2>Code</h2>
<p>To 'calibrate' the sensor and work out what your <code>co2cal</code> value should be, leave your sensor near an open window or outside for 10-15 minutes and see what values are logged from the <code>co2readings</code> (printed to the console as <code>i: xxx</code>).<br>
Usually you don't need to specify the port your Arduino is on, however, I was developing this on a Windows machine and it wouldn't auto-detect the correct port it was on. I find you can leave this blank on Linux and MacOS.</p>
<p><a href="http://johnny-five.io/examples/sensor">Based off of this Johnny Five sensor example</a></p>
<pre><code>const { Board, Sensor } = require("johnny-five");
const board = new Board({port: "COM3"});

// Atmospheric CO2 Level = 400ppm
// Average indoor CO2    = 350-450ppm
var co2readings = []; // array to store raw readings
var co2avg = 0;       // int for raw value of CO2
var co2comp = 0;      // int for compensated CO2
var co2sum = 0;       // int for summed CO2 readings
var co2cal = 75;      // margin of error of the sensor

board.on("ready", () => {
  // Create a new generic sensor instance for
  // a sensor connected to an analog (ADC) pin
  const sensor = new Sensor("A5");

  // When the sensor value changes, log the value
  sensor.on("change", value => {

    if (co2readings.length &#x3C; 10) {
      co2readings.push(sensor.value);
    } else {
      co2sum = 0
      for (var i in co2readings) {
        console.log("i: ", co2readings[i]);
        co2sum = co2sum + co2readings[i];
      }
      co2avg = co2sum / co2readings.length; // divide total to get avg
      co2comp = co2avg - co2cal; // get compensated value
      console.log("Average CO2: ", co2comp);
      co2readings = [];
    }

  });
});
</code></pre>
<p>Thanks for reading! Chur 🤙</p></div></div><footer class="footer-module--footer--R2bpz"><p>Senor Grande<!-- -->, copyright 2020</p></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/arduino-co2";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-c593fadebb2cdbf03700.js"],"component---src-templates-blog-js":["/component---src-templates-blog-js-905806397317b137f1de.js"],"component---src-pages-404-js":["/component---src-pages-404-js-16b9239c1dac9b9df3db.js"],"component---src-pages-about-js":["/component---src-pages-about-js-7eae9e40fb2937d7aeae.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-7dda43ab3832653cb05c.js"],"component---src-pages-contact-js":["/component---src-pages-contact-js-bd3471777a62fa80c4b9.js"],"component---src-pages-index-js":["/component---src-pages-index-js-80ac8071d240525ebf17.js"]};/*]]>*/</script><script src="/component---src-templates-blog-js-905806397317b137f1de.js" async=""></script><script src="/commons-e2ecdd7eec8533740b60.js" async=""></script><script src="/styles-7b77c40001eb780bb93d.js" async=""></script><script src="/app-c593fadebb2cdbf03700.js" async=""></script><script src="/webpack-runtime-93800de5fbb5b85039e8.js" async=""></script></body></html>