{"componentChunkName":"component---src-templates-blog-js","path":"/blog/arduino-joystick","result":{"data":{"markdownRemark":{"frontmatter":{"title":"üïπÔ∏è How to use a Joystick & Arduino to control a mouse cursor with NodeJS","date":"2020-08-23"},"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.23404255319149%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABYklEQVQY0z1QzUsCQRT3T+lUJ6+aJenMzox0rQ4RgUrdOnSILtEf0KFDpyAoOoRESVERFWtmmWluCmauiqsp5K7h+rEXzWNvdy0YHo/35vf1LK0yMx6F15fpQCGDBvtR6KBBtCpVJQLzbpVB0yyRToW1JKJK1PjPLCasXWGwuwy4Avvc8QF3ckiP9jgxzmk1CvP7i3EA9GQP9Al+Qs4bLCYYFp1PpohodWXa6/MtLy36ffMzs3M3p6hXB1IaOrcLYefDlaOQdCf4SU03QsGCoWx4U0vk/RmnH7EQRq+8Kx1B3wXSksAUlVJu/szuXRhJhpzZ2FRXjwMo+g/WI3286OBM1C3GsZIn7TLEY2DqK4fvgraNtdGdLauYcBnKut4ws2k+F8epCMrGUFHARYHLRDHQ1UWi1VjpDe1uWzfXx0yYUYcHY394AuZBTdXt6HQQGHqofdnzdO24Ddp6dU9zeG36C3IZCkO6ILG9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Johnny Five\"\n        title=\"Johnny Five\"\n        src=\"/static/9bbafa3b112cc845f1c8f7f5f9b9695f/8c557/johnny-five.png\"\n        srcset=\"/static/9bbafa3b112cc845f1c8f7f5f9b9695f/4dcb9/johnny-five.png 188w,\n/static/9bbafa3b112cc845f1c8f7f5f9b9695f/5ff7e/johnny-five.png 375w,\n/static/9bbafa3b112cc845f1c8f7f5f9b9695f/8c557/johnny-five.png 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Ever wanted to control the cursor on your screen with your own joystick? No? Just me?\nFollow the steps below to learn how to use NodeJS and an Arduino to control the mouse cursor on your screen.</p>\n<p>Wire up your Arduino board to your joystick and plug it into the computer you‚Äôre developing on. There a many different kinds of joystick but most use the same principles.\n<a href=\"http://johnny-five.io/api/joystick/\">You may find this link helpful</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.42553191489361%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADP0lEQVQ4y3WRf0zUZRzHv3/lEjUhHJwEaIBKuKk0a3NnazNcm2nqTEXwsFJQ6FA8jvvBsSPu5HQEDOEE9e7oRDSI/DGKCVoGqOfAKV6RpukcYwWc5o4EZfG9V9/jFuuPeG/v5/N8tufzet57HmHYB+Unv0FbWsP7JXbe3pxGnEJJbOpnzN+WhSxNxbzkTOZLfl2xj98GPAyPjHLqche21qtUNLdj/a4Tx0UXF270Irh7f8FyopH1X9QSs9tAYrqKyIJjxBfZWVL8JQlmB4kWJ2+YHIRrrfR7n9F8/TZRHxcg265nk7GCt5Rmgjblsiz7IMJxmw1XWwsG+2le3luGbJeB5RYbH1Z/jeZcOxuOnkVeWs+7ZfWE66y03uvn7NVbvLQhhyWZZto7r1Bk+4q5inyiPzEi3Ha7OVB/hlUSZJbyEPO2ZBBbUE2EtopI/RFC1YeZlVNGsLoS2Z5Calp+oPXmXaZvzCEsRYdMYSBUqnE7C0nIPIAwDsQVORCyywnOlYbVVQTtr2C62jrhoDwrMyXPyLczJ2UvZbVOLv30gJAtasJTdcxJ1RKSrCF2p5EFGSaEkb9FVhTbidmh4hVVBdP2lTMj6yARiv1ESB/i91yFiqgduUz7SEn++XY63Pd4VYLM3qohNNkg7bWESfCINAPC02ejyPWlJGz+lGhdFYtNdpaqLMSvWsOipHUsfO8D4levY/HqtYSsXIOm6SLuB328o6tkRYaOJFM6iRkq3sw5REpJLUJ3dzevRUURHBuPPM+C+ZgTfY2TUO0RwgodxBTXMVtTQ3RhHZHG45Rc6sKvoRGRR9eaaXKZuNLdgz+YV7Lw+x8DrNytZtkuNSnVDSzUV7JUaSQpW8/atHSWb89ifaUZuUqBfE8RHXceTgAZg5udn3PG1YD4XORfCf7FK/WPx0SePh/jT8lPRl/weOQFw0NDfFt+mK7O7/l5tInLng7GfIHBh4+uUd2YR1//wEQ/Pi7i8/kQ/Av4mFLiOLcamnCdOklXj5Uf++o4d70YZ4uF+9JbThzxBWCTQHEqi+LkVZ5f79N7/gI9bY303mjjryfeSdh/JUwVLJA8UP3g/w0vBpJ5vV48Hg+Dg4P8A2Fe6kTLu8UCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Arduino with joystick\"\n        title=\"Arduino with joystick\"\n        src=\"/static/b157ca55dca66e45fe1243f592172682/8c557/arduino-joystick.png\"\n        srcset=\"/static/b157ca55dca66e45fe1243f592172682/4dcb9/arduino-joystick.png 188w,\n/static/b157ca55dca66e45fe1243f592172682/5ff7e/arduino-joystick.png 375w,\n/static/b157ca55dca66e45fe1243f592172682/8c557/arduino-joystick.png 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Start a new project in an empty directory with <code>npm init</code></p>\n<h2>Install the dependencies</h2>\n<h3>Install Johnny-Five</h3>\n<p>Johnny-Five is what allows us to connect to the Arduino and get the joystick X and Y position as input.\n<code>npm i johnny-five</code></p>\n<p><a href=\"https://github.com/rwaldron/johnny-five\">Johnny Five GitHub Repo</a></p>\n<h2>Install RobotJS</h2>\n<p>Robot JS allows us to get the mouse position and move the mouse cursor to a new position by providing an X and Y value.\nIf on Windows:\nInstall Windows Build Tools in an Admin Powershell <code>npm --save-dev windows-build-tools</code></p>\n<p>If on Linux:\nRun this command to install missing packages <code>sudo apt-get install libxtst-dev libpng++-dev</code></p>\n<p>Then install RobotJS\n<code>npm i robotjs</code></p>\n<p><a href=\"https://github.com/octalmage/robotjs\">RobotJS GitHub Repo</a></p>\n<h2>Code for the joystick</h2>\n<p>Create a file and call it something along the lines of <code>app.js</code> , paste the code below and run it with <code>node app.js</code> and have fun playing with your üïπÔ∏è Bonza!</p>\n<p>On line 3, I found that I had to include the COM port for Windows, for Linux I was able to leave <code>Board()</code> empty and it would find the Arduino automatically.</p>\n<pre><code>var robot = require(\"robotjs\");\nvar five = require(\"johnny-five\")\nvar board = new five.Board({port: \"COM3\"}); // Windows include portvar mouse;function joy_move(axis_pos, mouse_pos) {\n  // Minimum threshold to count joystick movement\n  var joy_min_thresh = 0.02;\n  // Factor to move the mouse by\n  var joy_move_factor = 10;  if (axis_pos > joy_min_thresh) {\n    return(mouse_pos + joy_move_factor);\n  } else if (axis_pos &#x3C; -joy_min_thresh) {\n    return(mouse_pos - joy_move_factor);\n  } else {\n    return(mouse_pos);\n  }\n}board.on(\"ready\", function() {  // Create a new `joystick` hardware instance.\n  var joystick = new five.Joystick({\n    pins: [\"A0\", \"A1\"] // [ X, Y]\n  });  joystick.on(\"change\", function() {    mouse = robot.getMousePos();\n    var new_x = joy_move(this.x, mouse.x)\n    var new_y = joy_move(-this.y, mouse.y)    console.log(\"Mouse is at x:\" + new_x + \" y:\" + new_y);    // Move the mouse to x, y on the screen.\n    robot.moveMouse(new_x, new_y);\n  });\n});\n</code></pre>"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"arduino-joystick"}}}