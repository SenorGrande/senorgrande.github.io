{"componentChunkName":"component---src-templates-blog-js","path":"/blog/arduino-co2","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Arduino CO2 sensor with Johnny Five","date":"2020-09-27"},"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.23404255319149%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABYklEQVQY0z1QzUsCQRT3T+lUJ6+aJenMzox0rQ4RgUrdOnSILtEf0KFDpyAoOoRESVERFWtmmWluCmauiqsp5K7h+rEXzWNvdy0YHo/35vf1LK0yMx6F15fpQCGDBvtR6KBBtCpVJQLzbpVB0yyRToW1JKJK1PjPLCasXWGwuwy4Avvc8QF3ckiP9jgxzmk1CvP7i3EA9GQP9Al+Qs4bLCYYFp1PpohodWXa6/MtLy36ffMzs3M3p6hXB1IaOrcLYefDlaOQdCf4SU03QsGCoWx4U0vk/RmnH7EQRq+8Kx1B3wXSksAUlVJu/szuXRhJhpzZ2FRXjwMo+g/WI3286OBM1C3GsZIn7TLEY2DqK4fvgraNtdGdLauYcBnKut4ws2k+F8epCMrGUFHARYHLRDHQ1UWi1VjpDe1uWzfXx0yYUYcHY394AuZBTdXt6HQQGHqofdnzdO24Ddp6dU9zeG36C3IZCkO6ILG9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Johnny Five\"\n        title=\"Johnny Five\"\n        src=\"/static/9bbafa3b112cc845f1c8f7f5f9b9695f/8c557/johnny-five.png\"\n        srcset=\"/static/9bbafa3b112cc845f1c8f7f5f9b9695f/4dcb9/johnny-five.png 188w,\n/static/9bbafa3b112cc845f1c8f7f5f9b9695f/5ff7e/johnny-five.png 375w,\n/static/9bbafa3b112cc845f1c8f7f5f9b9695f/8c557/johnny-five.png 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Here's a quikc post on how to read from a CO2 sensor with Johnny-Five using an Arduino. You can get an MQ-135 sensor off Ebay for a couple dollarydoos.\n<a href=\"https://github.com/SenorGrande/co2-sensor\">Source code for this can be found here</a></p>\n<h2>Circuit Setup</h2>\n<p>Wire ground on the sensor to ground on the Arduino and same with VCC on the sensor to 5V. Connect AD on the sensor to any of the analog ports on the Arduino, I chose A0. If you use a different port, make sure this is reflected in the code!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 707px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.74468085106383%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAACnElEQVQoz2P4////v3///gLB//8/njx5N3kykPEHCP7+haD/uAEDUOd/sAFA4venTx9OnIBzCQKGX//+X7v74OjZi6vPXpu7ceu0TVvmbtw+a/OuWRt3zF6/de7W3R++fYe4DqLh3/9/z95+fPDyw9cfvxg+ff/ZtWSdT8NkvbRS7fAkkawm4eRqnuRakfR6kZQasYyGWy/eAPX8/fcPov/9l+8+JfMs02f0rL/AsHv37s0bN2TPXiGY0y5f2GnSszR68c7YJTtdpqx1nrJGqXn+8QcvIJr/gjW/ePvRLrlXP7Jz2vpTDJcuXVq0flPIhIW86U2q8QUGbfOMWufpt8yVKJskVz1NprBz7j5QKABDDmLzu8/fgzJqFcJbZ556zgDku0xexZDVI1w2WbBkEm/JFI6SqZwlU3lKp3LXzBOLK56ydAUoLP/8gWj+8PVnZFa1e3HPhnufGYACobPWKySVcRdNZMyfIJRUpRCVIxudB0SKsfm8wRnNmw+CNSPi7M79BztWLP/x4QPDz1+//araVQPj9Oune/cvtsmuUPYOVw+IVfeP0Q6MFfWJbtlyGE3zl58/lxSV/n70mOH1q1dSCoqsipoO1T0JTT0WZZ1CxRNVaqcLlE6WKJsoXjJhxelrED/DNX/4+m1Jafmvx49BiWTS9kPVK7dP2HcmY8We6qUbpjW2FyRn9G/d279gacPcpY/evAeF9l9IZAGj+d/H79+Xlpb/BmpGTjH/wMa/PXFyx7QZv4Gp9ft3rAnr65/fyyuqfkE0A530G5SM//36DdTy/+XeA4tq6249fHjm1KnLly5duXzl6hUwugxGly5fuHJlTkbWn0fYbP555+6O7Px1RaVrcwvW5CChXDDKK1yVnX+iofn/ly8AJEZuHW6zUD8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Arduino Circuit Diagram\"\n        title=\"Arduino Circuit Diagram\"\n        src=\"/static/210fab771a858a8676fa182ca0dbc75a/394f7/arduino-co2.png\"\n        srcset=\"/static/210fab771a858a8676fa182ca0dbc75a/4dcb9/arduino-co2.png 188w,\n/static/210fab771a858a8676fa182ca0dbc75a/5ff7e/arduino-co2.png 375w,\n/static/210fab771a858a8676fa182ca0dbc75a/394f7/arduino-co2.png 707w\"\n        sizes=\"(max-width: 707px) 100vw, 707px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2>Code</h2>\n<p>To 'calibrate' the sensor and work out what your <code>co2cal</code> value should be, leave your sensor near an open window or outside for 10-15 minutes and see what values are logged from the <code>co2readings</code> (printed to the console as <code>i: xxx</code>).<br>\nUsually you don't need to specify the port your Arduino is on, however, I was developing this on a Windows machine and it wouldn't auto-detect the correct port it was on. I find you can leave this blank on Linux and MacOS.</p>\n<p><a href=\"http://johnny-five.io/examples/sensor\">Based off of this Johnny Five sensor example</a></p>\n<pre><code>const { Board, Sensor } = require(\"johnny-five\");\nconst board = new Board({port: \"COM3\"});\n\n// Atmospheric CO2 Level = 400ppm\n// Average indoor CO2    = 350-450ppm\nvar co2readings = []; // array to store raw readings\nvar co2avg = 0;       // int for raw value of CO2\nvar co2comp = 0;      // int for compensated CO2\nvar co2sum = 0;       // int for summed CO2 readings\nvar co2cal = 75;      // margin of error of the sensor\n\nboard.on(\"ready\", () => {\n  // Create a new generic sensor instance for\n  // a sensor connected to an analog (ADC) pin\n  const sensor = new Sensor(\"A5\");\n\n  // When the sensor value changes, log the value\n  sensor.on(\"change\", value => {\n\n    if (co2readings.length &#x3C; 10) {\n      co2readings.push(sensor.value);\n    } else {\n      co2sum = 0\n      for (var i in co2readings) {\n        console.log(\"i: \", co2readings[i]);\n        co2sum = co2sum + co2readings[i];\n      }\n      co2avg = co2sum / co2readings.length; // divide total to get avg\n      co2comp = co2avg - co2cal; // get compensated value\n      console.log(\"Average CO2: \", co2comp);\n      co2readings = [];\n    }\n\n  });\n});\n</code></pre>\n<p>Thanks for reading! Chur ðŸ¤™</p>"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"arduino-co2"}}}